box: blisteringherb/scholarship@0.0.6
build:
    # The steps that will be executed on build
    steps:
      # A custom script step, name value is used in the UI
      # and the code value contains the command that get executed
      - leipert/composer-install@0.0.1
      - script:
          name: npm install
          code: sudo npm install
      - wercker/bundle-install@1.1.1
      - script:
          name: change permissions
          code: sudo chown -R ubuntu.ubuntu ./
      - script:
          name: install bower dependencies
          code: bower install
      - script:
          name: build assets
          code: gulp build
deploy:
  steps:
    - bundle-install
    - script:
        name: belt and suspenders 1
        code: chown -R ubuntu:ubuntu ./node_modules
    - script:
        name: belt and suspenders 2
        code: find . -type d -exec chmod 755 {} \;
    - script:
        name: belt and suspenders 3
        code: find . -type d -exec chmod 755 {} \;
    - script:
        name: what is the deal 1
        code: ls -l ./node_modules/gulp-imagemin/node_modules/imagemin/node_modules/imagemin-jpegtran/node_modules/jpegtran-bin/
    - script:
        name: what is the deal 2
        code: ls -l ./node_modules/gulp-imagemin/node_modules/imagemin/node_modules/imagemin-jpegtran/node_modules/jpegtran-bin/vendor/
    - script:
        name: list dir
        code: ls -la
    - script:
        name: write env var
        code: |-
          export CAP_PRIVATE_KEY=`mktemp`
          echo -e $WERCKER_APP_KEY_PRIVATE > $CAP_PRIVATE_KEY
    - cap
